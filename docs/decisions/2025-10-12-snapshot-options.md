# 2025-10-12: スナップショット軽量化アプローチ

## Context
- セッション書き出し時に全ウィンドウを強制的に含めていたため、必要なウィンドウだけを共有したいケースでファイルが肥大化していた。
- 将来的にセッション共有を外部へ持ち出す頻度が増えることを考慮すると、軽量化の仕組みと圧縮対応が必要だった。

## Decision
- `exportWorkspaceSnapshot` に書き出し対象 ID と圧縮方式を渡せるオプションを導入し、UI からも範囲と gzip 圧縮を切り替えられるようにする。
- gzip が使えない環境では従来通りプレーン JSON を返し、読み込み側で MIME タイプを判別して自動展開する。

## Consequences
- メンテナンスパネルから開いているウィンドウだけを手早く書き出せるようになり、不要な PDF を含めずに共有しやすくなる。
- 圧縮処理はブラウザの `CompressionStream` / `DecompressionStream` に依存するため、未対応ブラウザでは従来通りのサイズとなる点に注意する必要がある。
