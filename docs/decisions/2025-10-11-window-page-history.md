# 2025-10-11 — ページ履歴ナビゲーションの導入方針

## 背景
ページ番号を直接入力してシーンを行き来できるようになった一方、直前に参照したページへ戻る際には再入力が必要でテンポが落ちていた。GM は判定の成否やプレイヤーの選択に応じて前後の参照を繰り返すため、直近の移動履歴へ即座にアクセスできる導線が求められていた。

## 判断
- ヘッダーツールバーに「戻る」「進む」ボタンを追加し、最新 50 件までのページ遷移履歴を保持する。
- 履歴は現在位置より先を破棄するスタック方式とし、過去に戻った状態で新しいページへ移動した場合は未来側の履歴を切り詰める。
- 履歴位置と件数をウィンドウ `dataset` と永続化スキーマへ組み込み、複製・復元でも一貫した操作感を維持する。
- `workspace:window-page-change` の detail に履歴情報を含め、外部統合や計測から現在位置を把握できるようにする。

## 代替案
- 各ページをタブ化して明示的に残す案も検討したが、UI と保存データの複雑さが増し MVP の範囲を超えるため採用しなかった。
- 履歴を PDF ごとに共有する案は、複数ウィンドウで別履歴を持ちたいケースに対応できないため見送った。

## 影響
- 永続化レイヤーと複製ロジックが履歴配列・インデックスを扱うようになり、テストケースも履歴挙動をカバーする必要がある。
- UI にボタンが追加され、アクセシビリティラベルやスタイル、説明ドキュメントの更新が必要となった。
