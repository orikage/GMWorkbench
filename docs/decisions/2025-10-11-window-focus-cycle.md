# 2025-10-11: ウィンドウフォーカス循環ショートカットの導入

## 背景
- PDF ウィンドウが増えるとマウスでの再選択に時間がかかり、GM の思考フローが分断される課題があった。
- 既存のキーボード操作はページやズーム中心で、ウィンドウ切替は未整備だった。

## 決定
- `]` / `[` をフォーカス循環ショートカットとして採用し、最近使った順で次・前のウィンドウへ移動できるようにする。
- フォーカス移動時に `workspace:window-focus-cycle` を発火し、連携先が方向・対象ウィンドウ・総件数を把握できるようにする。
- 永続化に利用している `lastFocusedAt` を DOM (`data-last-focused-at`) とイベントに露出し、テスト・デバッグで参照可能にする。

## 選択理由
- `]` / `[` は既存ショートカットと衝突せず、入力欄を離れた状態で片手でも押しやすい。
- 最近使った順で循環することで、直前の PDF に素早く戻れるため GM の思考フローを保ちやすい。
- DOM 属性にタイムスタンプを公開することで Vitest での順序検証やアクセシビリティ調査が容易になる。

## 却下した案
- `Ctrl+Tab` など既存ブラウザショートカットとの競合が発生する案。
- 画面下部に専用のウィンドウ一覧 UI を置く案（スペース消費と視線移動が大きい）。

## フォローアップ
- 将来的にウィンドウを名前順や色タグで循環するモードが必要になった場合は、イベント詳細に `order` などを追加して切り替えられるよう検討する。
- フォーカス循環がアクセシビリティ観点で十分か、スクリーンリーダーでの動作確認をタスクに追加する。
